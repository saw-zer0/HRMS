<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Leave</title>
        <link rel="stylesheet" href="leave_copy.css" />
        <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        />
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div class="wrapper">
            <div class="sidebar">
                <h2><img src="image/LOGO.png" class="logo" /></h2>
                <ul>
                    <li class="home">
                        <a
                            href="#"
                            class="nav-item"
                            onclick="navigateToPage('home')"
                            >Home</a
                        >
                    </li>
                    <li class="profile">
                        <a
                            href="#"
                            class="nav-item"
                            onclick="navigateToPage('profile')"
                            >Profile</a
                        >
                    </li>
                    <li class="attendence">
                        <a
                            href="#"
                            class="nav-item"
                            onclick="navigateToPage('attendence')"
                            >Attendance</a
                        >
                    </li>
                    <li class="leave">
                        <a
                            href="#"
                            class="nav-item"
                            onclick="navigateToPage('leave_HR')"
                            >Leave</a
                        >
                    </li>
                    <li class="payroll">
                        <a
                            href="#"
                            class="nav-item"
                            onclick="navigateToPage('payroll')"
                            >Payroll</a
                        >
                    </li>
                </ul>
                <div class="social_media"></div>
            </div>
            <div class="main_content">
                <div class="header">
                    <div class="notification">
                        <button class="notify-btn"><i class="fas fa-bell"></i></button>
                        <div class="dropdown-content" id="dropdownContent">
                          <!-- Dummy notifications -->
                          <a href="#">New leave request from John Doe</a>
                          <a href="#">Reminder: Performance review due for Jane Smith</a>
                          <a href="#">Upcoming birthday: Happy Birthday to Sarah Johnson!</a>
                        </div>
                      </div>

                    <div class="profile">
                        <button class="profile-button" onclick="">
                            <i class="fas fa-user"></i><span>AnupThapa</span>
                        </button>
                        <div class="popup" id="popup">
                            <span class="popup-content">
                              
                              <span class="close" id="close">&times;</span>
                               <div class="image-container">
                                <img src="profile.png" alt="Image" class="popup-image">
                               </div> 
                               <!-- <span class="edit-profile">
                                <a href="#" id="edit-profile-link">Edit Profile</a>
                              </span> -->
                              <p class="name">Anup Thapa</p>
                              <p>Email: anup@example.com</p>
                              <p>Address: kamalpokhari</p>
                              <p>Phone number: 98000000</p>
                            
                            </span>
                          </div>
                    </div>


                    <section><button class="logout">Logout</button>
                        <span class="overlay"></span>
                  
                        <div class="modal-box">
                          <h2>Logout</h2>
                          <h3>Are you sure you want to log out?</h3>
                  
                          <div class="buttons">
                            <button class="close-btn">Cancel</button>
                            <button class="confirm-btn">Logout</button>
                          </div>
                        </div></section>

                </div>
                <div class="leave-info">
                    <button class="leave-button" onclick="openModal()">
                        Apply for leave
                    </button>
                    <div id="myModal" class="modal">
                        <!-- Modal content -->
                        <div class="modal-content">
                            <span class="close" onclick="closeModal()"
                                >&times;</span
                            >
                            <h2>Request for Leave</h2>
                            <form id="leaveForm">
                                <div class="form-group">
                                    <label for="employeeName"
                                        >Employee Name:</label
                                    >
                                    <input
                                        type="text"
                                        id="employeeName"
                                        name="employeeName"
                                        required
                                    />
                                </div>

                                <div class="form-group">
                                    <label for="leaveType">Leave Type:</label>
                                    <select
                                        id="leaveType"
                                        name="leaveType"
                                        required
                                    >
                                        <option value="Vacation">
                                            Vacation
                                        </option>
                                        <option value="Sick">Sick</option>
                                        <option value="Personal">
                                            Personal
                                        </option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="startDate">Start Date:</label>
                                    <input
                                        type="date"
                                        id="startDate"
                                        name="startDate"
                                        required
                                    />
                                </div>

                                <div class="form-group">
                                    <label for="endDate">End Date:</label>
                                    <input
                                        type="date"
                                        id="endDate"
                                        name="endDate"
                                        required
                                    />
                                </div>

                                <div class="form-group">
                                    <label for="leaveReason"
                                        >Leave Reason:</label
                                    ><br />
                                    <textarea
                                        id="leaveReason"
                                        name="leaveReason"
                                        rows="4"
                                        cols="50"
                                        required
                                    ></textarea>
                                </div>

                                <div class="button-group">
                                    <button
                                        type="button"
                                        class="cancel-btn"
                                        onclick="closeModal()"
                                    >
                                        Cancel
                                    </button>
                                    <button type="submit" class="submit-btn">
                                        Submit
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <div class="leave-req">
                    <h3>Leave Requests</h3>
                    <div class="container">
                        <div class="Total-req"> <img src = "icons/total-requ.png"><div class="number">10</div><p>Total Requests</p></div>
                        <div class="Approved"><img src = "icons/tick.png"><div class="number">10</div><p>Approved</p></div>
                        <div class="Pending"><img src = "icons/pending.png"><div class="number">10</div><p>Pending</p></div>
                        <div class="Declined"><img src = "icons/decline.png"><div class="number">10</div><p>Declined</p></div>
                    </div>
                </div>

                <div class="table-container">
                    <table id="myTable">
                        <thead>
                            <tr>
                                <th>Leave Type</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Annual Leave</td>
                                <td>2024-04-01</td>
                                <td>2024-04-05</td>
                                <td>Approved</td>
                                <td>
                                    <button>Edit</button>
                                    <button>Delete</button>
                                </td>
                            </tr>
           
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <script>

            document.addEventListener("DOMContentLoaded", function() {
                var profileButton = document.querySelector(".profile-button");
                var popup = document.querySelector(".popup");
                var closePopup = document.querySelector(".close");
              
                profileButton.addEventListener("click", function() {
                  popup.style.display = "block";
                });
              
                closePopup.addEventListener("click", function() {
                  popup.style.display = "none";
                });
              });


            var dataArray = [
                {
                    leaveType: "Sick",
                    startDate: "2024-04-01",
                    endDate: "2024-04-05",
                    status: "Approved",
                },

                {
                    leaveType: "Casual",
                    startDate: "2024-04-01",
                    endDate: "2024-04-05",
                    status: "Approved",
                },
            ]
            function appendHtml(el, str) {
                var div = document.createElement("div")
                div.innerHTML = str
                while (div.children.length > 0) {
                    el.appendChild(div.children[0])
                }
            }
            function addRows() {
                var table = document.getElementById("myTable")
                var tbody = table.getElementsByTagName("tbody")[0]

                for (var i = 0; i < dataArray.length; i++) {
                    var row = document.createElement("tr")

                    for (var key in dataArray[i]) {
                        var cell = document.createElement("td")
                        cell.appendChild(
                            document.createTextNode(dataArray[i][key])
                        )
                        row.appendChild(cell)
                    }
                    var actionCell = document.createElement("td")
                    appendHtml(
                        actionCell,
                        "<button>Edit</button> <button>Delete</button>"
                    )
                    row.appendChild(actionCell)
                    tbody.appendChild(row)
                }
            }
            addRows()

            function navigateToPage(page) {
                window.location.href = page
            }

            var modal = document.getElementById("myModal")
            var btn = document.getElementById("myBtn")
            var span = document.getElementsByClassName("close")[0]

            function openModal() {
                modal.style.display = "block"
            }

            function closeModal() {
                modal.style.display = "none"
            }

            window.onclick = function (event) {
                if (event.target == modal) {
                    modal.style.display = "none"
                }
            }

            document
                .getElementById("leaveForm")
                .addEventListener("submit", function (event) {
                    event.preventDefault()
                    alert("Leave request submitted successfully!")
                    closeModal()
                })

                
   // Get the bell button and dropdown content
var bellButton = document.querySelector('.notify-btn');
var dropdownContent = document.getElementById('dropdownContent');

// Toggle dropdown visibility on bell button click
bellButton.addEventListener('click', function(event) {
  // Prevent default action of button click
  event.preventDefault();
  
  // Toggle the visibility of the dropdown content
  dropdownContent.classList.toggle('show');
  
  // Get the position of the bell button
  var buttonRect = bellButton.getBoundingClientRect();
  
  // Set the position of the dropdown content relative to the bell button
  dropdownContent.style.top = (buttonRect.bottom + window.pageYOffset) + 'px';
  dropdownContent.style.left = buttonRect.left + 'px';
});

// Close the dropdown if the user clicks outside of it
window.addEventListener('click', function(event) {
  if (!event.target.matches('.notify-btn')) {
    dropdownContent.classList.remove('show');
  }
});

//logout button
const section = document.querySelector("section"),
overlay = document.querySelector(".overlay"),
showBtn = document.querySelector(".logout"),
closeBtn = document.querySelector(".close-btn");

//showBtn.addEventListener("click", () => section.classList.add("active"));
showBtn.addEventListener("click", () => {
if (section) {
    section.classList.add("active");
} else {
    console.error("Main content element not found!");
}
});

overlay.addEventListener("click", () =>
section.classList.remove("active")
);

closeBtn.addEventListener("click", () =>
section.classList.remove("active")
);
        </script>
    </body>
</html>
